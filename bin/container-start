#!/bin/bash
DIR=$(dirname `realpath -s "$0"`)

if [ "$(docker ps -a | grep mbp-runner)" ]; then
  echo "Project container is already running!"; exit 1
fi

docker run --detach \
           --rm \
           --privileged \
           --user root \
           --publish 2059:5900 \
           --publish 2088:2088 \
           --env-file $DIR/../.env \
           --env USER=root \
           --volume $DIR/../bin/arguments:/root/bin \
           --volume $DIR/../src/simulation:/mnt/simulation \
           --volume $DIR/../data:/mnt/data \
           --volume $DIR/../notebooks:/mnt/notebooks \
           --name mbp-runner \
           $@ \
           machine-boom-project:latest
